Floofy Fox - A Multi-Server AI Discord Bot
Floofy Fox is an advanced, feature-rich Discord bot built with Node.js and the discord.js library. He is designed to be a fully interactive and intelligent server companion, powered by the Google Gemini AI. Floofy features a persistent memory, a dynamic personality, a full music system, an engagement-based leveling system, and a comprehensive suite of moderation and utility commands.

This bot is built to be server-agnostic, meaning it can be invited to and configured for any number of Discord servers, with each server having its own unique settings, user profiles, and conversation histories.

‚ú® Features
Floofy comes packed with a wide array of features, divided into several categories:

ü§ñ Core AI & Memory System
Persona-Driven Conversation: Floofy maintains a consistent "femboy fox furry" persona, providing creative and non-repetitive responses.

Per-Channel Conversational Memory: Remembers the last 20 messages in active chat channels to provide contextually aware replies.

User Profiles: Creates a unique profile for each user, storing their preferred name, learned facts, level, and currency.

Automatic Learning: Silently analyzes messages in designated "listening channels" to learn personal facts and personality traits about users, which are then used to personalize future conversations.

Prompt Injection Protection: A final rule in the AI prompt instructs the model to ignore user attempts to change its core personality or instructions.

üéµ Advanced Music Player
Multi-Source Streaming: Plays songs and playlists from both YouTube and Spotify.

Persistent UI: An admin can set up a dedicated music channel where Floofy posts a persistent control panel with buttons for Play/Pause, Skip, Stop, and Queue. This UI updates in real-time.

Link-Based Queueing: Users can simply paste a valid song or playlist link into the music channel to have it automatically added to the queue.

Auto Voice Management: Floofy automatically joins the user's voice channel and will disconnect after being left alone for one minute.

üèÜ Engagement & Economy
Leveling System: Users earn XP for chatting in active or listening channels (with a one-minute cooldown to prevent spam). When they earn enough XP, they level up, and Floofy posts a congratulatory message.

Server Currency: Users earn a server-specific currency (default: "Sparkles") alongside XP for activity.

Leaderboard: The /leaderboard command displays the top 10 users in the server based on their total XP.

üë§ User Commands
/help: Displays a complete list of commands.

/ping: Checks if the bot is online.

/mynameis [name]: Sets a user's preferred name.

/forgetme: Deletes a user's entire profile.

/mymemory [view|forget]: Allows users to view and delete specific facts the bot has learned about them.

/level [@user]: Checks a user's level and XP.

/balance [@user]: Checks a user's currency balance.

/give [@user] [amount]: Gives currency to another user.

/summarize: Provides an AI-generated summary of the recent channel conversation.

/timein [location]: Displays the current time in a specified city or timezone.

/privacy & /tos: Links to the bot's Privacy Policy and Terms of Service.

üëë Admin-Only Commands
/chatchannel [add|remove|list]: Manages channels where Floofy will actively chat.

/listenchannel [add|remove|list]: Manages channels where Floofy will silently learn about users.

/clearhistory: Wipes the conversation memory for the current channel.

/viewprofile [@user]: DMs the admin an AI-generated personality summary and a full list of notes for a user.

/addnote [@user] [note]: Manually adds a note to a user's profile.

/leveladmin [set|add|remove] [@user] [amount]: Directly manages a user's level.

/setwelcomechannel [channel]: Sets the channel for welcome messages.

/setlogchannel [channel]: Sets the channel for pinned message logs.

/setquestchannel [channel]: Sets the channel for periodic AI quests.

/setwelcome [message]: Customizes the server's welcome message.

/setcurrencyname [name]: Sets the name of the server's currency.

/customcommand [add|remove|list]: Manages simple, custom text commands.

/announce [channel] [message]: Sends a formatted announcement as the bot.

/purge [amount]: Deletes up to 100 recent messages from a channel.

/setupmusic: Sets up the persistent music player UI in the current channel.

‚ú® Passive & Special Features
AI Status Updater: Floofy's "Playing" status is uniquely generated by AI every 30 minutes.

Welcome Messages: Automatically welcomes new members in the designated channel.

Message Logging: Users can react with üìå to save a message to the log channel.

Image Recognition (whatisthis): A right-click context menu command to get an AI description of an image.

AI Quests: Periodically, Floofy will post an AI-generated mini-quest in the quest channel, offering an XP reward for completion.

üîß Requirements
To run this bot, you will need:

Node.js v16.9.0 or higher.

A Discord Bot Token.

A Google Gemini API Key from a Google Cloud project with the "Generative Language API" and Billing enabled.

An empty commands folder in the project root.

üöÄ Setup Guide
Clone the Repository:

git clone https://github.com/Ihasabucket8950/FloofyFox.git
cd FloofyFox

Install Dependencies:
Open a terminal in the project folder and run:

npm install

This will install discord.js, axios, @discordjs/voice, play-dl, ffmpeg-static, and date-fns-tz.

Configure the Bot:

Open config.json and fill in all the required values: discordToken, geminiApiKey, and clientId.

Register Slash Commands:

You only need to do this once, or whenever you add/change a command definition.

Run the deployment script from your terminal:

node deploy-commands.js

Wait for the success message. Note that global commands can take up to an hour to appear in all servers.

Run the Bot:

Start the bot with the following command:

node index.js

You should see a "Logged in as FloofyFox..." message in your console.

Initial Server Setup:
Once the bot is in your server, an Admin must use the following commands to configure it:

/setwelcomechannel [channel]

/setlogchannel [channel]

/setupmusic (in the channel you want to dedicate to music)

/chatchannel add (in channels where you want Floofy to talk)

/listenchannel add (in channels where you want Floofy to learn)

üìÅ File Structure
index.js: The main bot file. Handles event listeners, the AI chat logic, and runs the command handler.

database.js: A module that manages all data persistence by reading/writing to local .json files.

deploy-commands.js: A script to register all slash commands with Discord's API.

MusicPlayer.js: A self-contained class that handles all music-related functionality.

config.json: Stores secret tokens and IDs.

commands/: An (optional) folder for organizing individual command files if you choose to refactor later.

*.json: Auto-generated database files (profiles.json, settings.json, etc.).
